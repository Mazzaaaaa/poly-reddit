<dom-module id="my-app">

	<!-- build:css styles/main.css -->
	<link rel="stylesheet" href="my-app.css">
	<!-- endbuild-->

	<template>

		<my-reddit id="myReddit" posts="{{posts}}" loading="{{loading}}" on-posts-loaded="_onPostsLoaded"></my-reddit>

		<paper-drawer-panel id="paperDrawerPanel" forceNarrow>

			<paper-header-panel main mode="waterfall">
				<paper-toolbar id="mainToolbar">
					<paper-icon-button id="button" icon="clear" on-click="_onClearButtonClick"></paper-icon-button>
					<span class="flex">
					<div class="appname bottom paper-font-display1">Poly-Reddit Test</div></span>
					<paper-icon-button icon="refresh"></paper-icon-button>
					<paper-icon-button icon="search"></paper-icon-button>
					<div class="middle"></div>
				</paper-toolbar>

				<neon-animated-pages id="pages" selected="0" entry-animation="slide-from-right-animation" exit-animation="slide-left-animation">

					<my-post-list id="postList" posts="{{posts}}" selected="{{selected}}" on-item-click="_onItemClick" loading="{{loading}}"></my-post-list>

					<my-post-detail data="{{selected}}" on-close="_onClose"></my-post-detail>

				</neon-animated-pages>

			</paper-header-panel>

		</paper-drawer-panel>

	</template>

</dom-module>

<script>
	Polymer({
		is: 'my-app',

		properties: {
			loading: {type: Boolean},
			selected: {type: Object}
		},

		ready: function() {
			this.$.myReddit.$.ajax.generateRequest();
		},
		_onItemClick: function() {
			this.$.pages.selected = 1;
		},
		_onClose: function() {
			this.$.pages.selected = 0;
		},
		_onPostsLoaded: function() {
			console.log('_onPostsLoaded');
			this.$.postList.loadList();
		},

	});
</script>